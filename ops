{"version":1,"ops":[{"type":1,"author":{"id":"f06177fafc3be596eb8ae669d88e704f3bec70f8"},"timestamp":1604355475,"metadata":{"github-id":"MDU6SXNzdWU3MzQ4NzM1NjA=","github-url":"https://github.com/firecat53/keepmenu/issues/70","origin":"github"},"title":"Incorrect terminal config softlocks the daemon","message":"On my machine, there is no xterm, I use kitty instead.\nWhen launching keepass and trying to edit a note, the window disappears and trying to open keepmenu again will have no effect.\nTo fix this, I have to `pregp -a python | grep keep` and `kill` all PIDs that show up.\n\nThis is the error message that shows up when I run the first keepmenu instance on a terminal:\n\n```\n~$ keepmenu\nxdotool version 3.20160805.1\nProcess DmenuRunner-2:\nTraceback (most recent call last):\n  File \"/usr/bin/keepmenu\", line 1463, in \u003cmodule\u003e\n    MANAGER = client()\n  File \"/usr/bin/keepmenu\", line 1240, in client\n    mgr.connect()\n  File \"/usr/lib/python3.8/multiprocessing/managers.py\", line 548, in connect\n    conn = Client(self._address, authkey=self._authkey)\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 502, in Client\n    c = SocketClient(address)\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 630, in SocketClient\n    s.connect(address)\nConnectionRefusedError: [Errno 111] Connection refused\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\n    self.run()\n  File \"/usr/bin/keepmenu\", line 1275, in run\n    self.dmenu_run()\n  File \"/usr/bin/keepmenu\", line 1333, in dmenu_run\n    self.menu_edit_entries()\n  File \"/usr/bin/keepmenu\", line 1376, in menu_edit_entries\n    edit = edit_entry(self.kpo, entry)\n  File \"/usr/bin/keepmenu\", line 1176, in edit_entry\n    sel = edit_notes(kp_entry.notes)\n  File \"/usr/bin/keepmenu\", line 1213, in edit_notes\n    call(editor)\n  File \"/usr/lib/python3.8/subprocess.py\", line 340, in call\n    with Popen(*popenargs, **kwargs) as p:\n  File \"/usr/lib/python3.8/subprocess.py\", line 854, in __init__\n    self._execute_child(args, executable, preexec_fn, close_fds,\n  File \"/usr/lib/python3.8/subprocess.py\", line 1702, in _execute_child\n    raise child_exception_type(errno_num, err_msg, err_filename)\nFileNotFoundError: [Errno 2] No such file or directory: 'xterm'\n```\nThis error is of course fixed by setting `terminal = kitty` in the config, but it would be better if this error was shown to the user properly and didn't softlock the daemon.","files":null}]}