{"version":1,"ops":[{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1519495148,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2ODI0Njc4Ng==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-368246786"},"message":"Hmm, that would be a property of PyuserInput. It's unclear how their support is for alternate layouts after some initial research. There's another project called pynput...I'll put together a branch using that library instead and have you test it and see if it works any better/different.","files":null},{"type":3,"author":{"id":"c7214770adf8ee9d91bd5bcd5f566d509331a470"},"timestamp":1519506631,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2ODI2MDU0MQ==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-368260541"},"message":"Hey this looks like it could work:\n\nPyUserInput:\n```\n\u003e\u003e\u003e from pykeyboard import PyKeyboard\n\u003e\u003e\u003e k = PyKeyboard()\n\u003e\u003e\u003e k.type_string('@yzüöä{[]}')\n\"yzüöä(89)\u003e\u003e\u003e \n```\n\nPynput\n```\n\u003e\u003e\u003e from pynput.keyboard import Key, Controller\n\u003e\u003e\u003e keyboard = Controller()\n\u003e\u003e\u003e keyboard.type('@yzüöä{[]}')\n@yzüöä{[]}\u003e\u003e\u003e \n```","files":null},{"type":3,"author":{"id":"c7214770adf8ee9d91bd5bcd5f566d509331a470"},"timestamp":1519507804,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2ODI2MTc1OQ==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-368261759"},"message":"But even Pynput cannot type some characters, like the € sign...\nmeanwhile PyUserInput completely craps out on that one.\n\n```\n\u003e\u003e\u003e from pykeyboard import PyKeyboard\n\u003e\u003e\u003e k = PyKeyboard()\n\u003e\u003e\u003e k.type_string('But can it type €?')\nBut can it type Traceback (most recent call last):\n  File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e\n  File \"/home/fabian/.venv/input/lib/python3.6/site-packages/pykeyboard/base.py\", line 79, in type_string\n    self.tap_key(char)\n  File \"/home/fabian/.venv/input/lib/python3.6/site-packages/pykeyboard/base.py\", line 43, in tap_key\n    self.press_key(character)\n  File \"/home/fabian/.venv/input/lib/python3.6/site-packages/pykeyboard/x11.py\", line 73, in press_key\n    self._handle_key(character, X.KeyPress)\n  File \"/home/fabian/.venv/input/lib/python3.6/site-packages/pykeyboard/x11.py\", line 66, in _handle_key\n    fake_input(d, event, keycode)\n  File \"/usr/lib/python3.6/contextlib.py\", line 88, in __exit__\n    next(self.gen)\n  File \"/home/fabian/.venv/input/lib/python3.6/site-packages/pymouse/x11.py\", line 58, in manager\n    raise X11Error(errors)\npymouse.x11.X11Error: [(BadValue(\u003cXlib.display._BaseDisplay object at 0x7fc257c3d1d0\u003e, b'\\x00\\x02Q\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x84\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'), None)]\n\u003e\u003e\u003e \n```\n\n```\n\u003e\u003e\u003e from pykeyboard import PyKeyboard\n\u003e\u003e\u003e from pynput.keyboard import Key, Controller\n\u003e\u003e\u003e keyboard = Controller()\n\u003e\u003e\u003e keyboard.type('But can it type €?') \nBut can it type ?\u003e\u003e\u003e \n```\n**The crash of PyUserInput seems to also affect keepmenu**. After selecting an entry that contains an € sign, the entry is being typed up to the character before that symbol and then stops. Keepmenu then doesn't respond to further cli calls to it until it is killed and restarted. You might want to check out if that also happens for american keyboard layouts.\n\n---\n\nIf there is no method to reliably type in special characters from python, you could either add copying to clipboard as an option, or maybe perform the typing via an external call to xdotool? It seems to handle the above cases fine.","files":null},{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1519508951,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2ODI2Mjk1Nw==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-368262957"},"message":"Thanks for the troubleshooting! I'm at work today, so unable to do much...\n\nGreat idea about calling xdotool as an alternative... I'll take a look at that. \n\nIf you're ok with it, I'd suggest submitting your findings as bugs for both the py input projects and link them to this issue.","files":null},{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1519745407,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2ODkxNjk4NA==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-368916984"},"message":"Give the develop branch a try...I added xdotool support. Add an entry `type_library = xdotool` in the `database` section of config.ini. Let me know how it works!","files":null},{"type":3,"author":{"id":"96f5ebf8c252b2a8dee4879ae23f5f8c68c09586"},"timestamp":1519894387,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2OTUyMDI1NQ==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-369520255"},"message":"Hey,\nI followed this conversation, having the same issue with qwertz layout. I cloned your develop branch. xdotool usually makes the same mistake with irgnoring the keyboard layout. \n\nI solved this issue with calling \"setxkbmap de\" within the type_entry_xdotool function, this seems to be the common workaround to get xdotool to type things properly with qwertz (https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=740811). Maybe you could just add a config option for that, too.\n\nI am not that into programming, so let me know if this workaround isn't a proper option.","files":null},{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1519939776,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM2OTczNzIxMw==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-369737213"},"message":"Thanks for testing...lemme add that and have you test again and see if it works for you. Might be a day or two.","files":null},{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1520033724,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MDA4ODE2NA==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-370088164"},"message":"@Gelion01  and @fneu, I've been playing with this and I think if you actually call 'setxkbmap xx' in your login profile someplace that it should carry through and be used by xdotool because they share the same X session.\n\nMy issue with calling setxkbmap from keepmenu is that it overrides any existing keyboard setups and Xmodmap mappings. This would definitely be an issue for people with more complex keyboard setups.\n\nCan you both please try calling setxkbmap from your .bashrc, .bash_profile, .xinitrc, or whatever other file is called when you login (depending on your window manager/desktop environment) and then see if that is propagated through to xdotool called from keepmenu?\n\nThanks!","files":null},{"type":3,"author":{"id":"e59dfa6eebd8dbd03fec8f2791190e665ab94059"},"timestamp":1520125033,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MDE5MjgzMA==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-370192830"},"message":"Hi, first of all: thanks for your great work!\n\nI'm using the develop branch and I'm executing \"setxkbmap de\" in my i3 config on i3 startup. Typing with xdotool works for me.\n\nKeep it up and big thanks!","files":null},{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1520125369,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MDE5MzA0NA==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-370193044"},"message":"Awesome, thanks for the comment! I'm gonna wait for a bit longer and see if anyone else can confirm this too before I merge the changes into master.","files":null},{"type":3,"author":{"id":"96f5ebf8c252b2a8dee4879ae23f5f8c68c09586"},"timestamp":1520185527,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MDI0ODMzNg==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-370248336"},"message":"Same here. Also using i3 and not experiencing any problems with setting xkbmap via i3conf.\n\nThank you for your work!","files":null},{"type":3,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1521128978,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MzQyNDQ5Nw==","github-url":"https://github.com/firecat53/keepmenu/issues/2#issuecomment-373424497"},"message":"I went ahead and merged xdotool support into master and released 0.5.2 on PyPi. @fneu, let me know if there are any additional issues. Closing this for now. Thanks all!","files":null},{"type":4,"author":{"id":"3c87de25ab8b2ec3449081ec888ea2a273bb79fc"},"timestamp":1521128978,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTUyMzYzNDAxMQ=="},"status":2}]}